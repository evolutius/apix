<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Implementation Access Control with Access Levels | @evolutius/apix</title><meta name="description" content="Documentation for @evolutius/apix"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><link rel="stylesheet" href="../assets/typedoc-github-style.css"/></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@evolutius/apix</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@evolutius/apix</a></li><li><a href="Implementation_Access_Control_with_Access_Levels.html">Implementation Access Control with Access Levels</a></li></ul></div><div class="tsd-panel tsd-typography"><p>Access levels are API-X mechanism that evaluates who has access to what resources and to what extent. It has enough flexibility for developers to decide how and to what extent to protect their data.</p>
<p>Fixed access levels are defined for each endpoint based on the data or operation it grants access to. Additionlly, each valid request has its own access level that determines the access it has to the endpoint that the request is directed to.</p>
<a id="md:levels" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Levels<a href="#md:levels" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>API-X has a clear guidance on how access levels and characteristics should be assigned to control access to resources.</p>
<a id="md:setting-endpoint-characteristics" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Setting Endpoint Characteristics<a href="#md:setting-endpoint-characteristics" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>API-X endpoints use characteristics to determine the minimum access levels required to access them. There are several characteristics that can be assigned to endpoints:</p>
<table>
<thead>
<tr>
<th>Characteristic</th>
<th>Description</th>
<th>Resulting Access Level</th>
</tr>
</thead>
<tbody>
<tr>
<td>Internal</td>
<td>Endpoints for superusers, administrators, server owners.</td>
<td><strong>Admin</strong></td>
</tr>
<tr>
<td>Moderative</td>
<td>Endpoints content editors and moderators, such as banning users, posts, etc.</td>
<td><strong>Moderator</strong></td>
</tr>
<tr>
<td>Institutional</td>
<td>Endpoints for a private instuition and its employees or the like.</td>
<td><strong>Manager</strong></td>
</tr>
<tr>
<td>Special</td>
<td>Endpoints available to select group or individuals with special privileges, such as beta testers.</td>
<td><strong>Privileged Requestor</strong></td>
</tr>
<tr>
<td>Private Owned Data</td>
<td>Endpoints that process or serve owned data, e.g., data for specific users.</td>
<td><strong>Resource Owner</strong></td>
</tr>
<tr>
<td>Public Owned Data</td>
<td>Endpoints that can process or serve data owned by an entity but meant to be publically available, e.g., a user's username in a social media platform.</td>
<td><strong>Authenticated Requestor</strong></td>
</tr>
<tr>
<td>Public Unowned Data</td>
<td>Endpoints that return data that isn't owned by any entity and is meant for the public consumption by authorized requestor.</td>
<td><strong>Public Requestor</strong></td>
</tr>
</tbody>
</table>
<p><em>Note: It is the responsibility of each endpoint handler to fulfill the promise of its characteristics. See example from the next section for details.</em></p>
<a id="md:determining-access-levels-for-requests" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Determining Access Levels for Requests<a href="#md:determining-access-levels-for-requests" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>When a valid request is received, API-X will ask developers the level of access the request should have. The guidance for assigning access levels is as follows:</p>
<table>
<thead>
<tr>
<th>Requestor</th>
<th>Endpoint</th>
<th>Recommended Access Level</th>
</tr>
</thead>
<tbody>
<tr>
<td>A superuser or adminitrator of the server.</td>
<td>Any endpoint.</td>
<td><strong>Admin</strong></td>
</tr>
<tr>
<td>A content moderator or editor with elevated priviledges.</td>
<td>Any non-internal endpoint.</td>
<td><strong>Moderator</strong></td>
</tr>
<tr>
<td>Employee users or applications.</td>
<td>Any non-internal or moderative enpoint.</td>
<td><strong>Manager</strong></td>
</tr>
<tr>
<td>A group or individual with special privileges (such as beta testers).</td>
<td>Only endpoints designated as special use for the group or individual.</td>
<td><strong>Privileged Requestor</strong></td>
</tr>
<tr>
<td>A user or application requesting access to its own data.</td>
<td>Endpoints that serves resources owned by the requesting application or user.</td>
<td><strong>Resource Owner</strong></td>
</tr>
<tr>
<td>A user or application requesting access public but owned data.</td>
<td>Endpoints that can process or return public owned data.</td>
<td><strong>Authenticated Requestor</strong></td>
</tr>
<tr>
<td>An authenticated application that does not fall in any other category.</td>
<td>Endpoints that return data meant for the public consumption of authorized applications.</td>
<td><strong>Public Requestor</strong></td>
</tr>
<tr>
<td>One requesting access to a resource they should not have access to for any reason.</td>
<td>Any endpoint.</td>
<td><strong>None</strong></td>
</tr>
</tbody>
</table>
<a id="md:example-endpoint-implementation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Example Endpoint Implementation<a href="#md:example-endpoint-implementation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Below is an example endpoint that allows one to retrieve data for a specific user in a social media platform-like service. This endpoint can return data that's deemed public but owned by a user, such as username, profile photo, etc., but also data that is private and owned by a user, and as such phone number, ID, etc.</p>
<p>For this reason, this API-X endpoint has two characteristics:</p>
<ol>
<li><code>PrivateOwnedData</code>; and,</li>
<li><code>PublicOwnedData</code>.</li>
</ol>
<p>API-X will determine that a minimum access level of 5 is then required to access it, but it's the request handler's responsibility to fulfill its promise to deliver Resource Owner data (privately owned data) if the requestor has enough access.</p>
<pre><code class="ts"><span class="hl-9">/**</span><br/><span class="hl-9"> * This endpoint returns data about specific users.</span><br/><span class="hl-9"> */</span><br/><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-0">endpoint</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">entity:</span><span class="hl-1"> </span><span class="hl-7">&#39;users&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">method:</span><span class="hl-1"> </span><span class="hl-7">&#39;{id}&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">httpMethod:</span><span class="hl-1"> </span><span class="hl-7">&#39;GET&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">characteristics:</span><span class="hl-1"> </span><span class="hl-6">new</span><span class="hl-1"> </span><span class="hl-5">Set</span><span class="hl-1">([</span><br/><span class="hl-1">    </span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PrivateOwnedData</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PublicOwnedData</span><span class="hl-1">,</span><br/><span class="hl-1">  ]),</span><br/><span class="hl-1">  </span><span class="hl-5">requestHandler</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-6">async</span><span class="hl-1"> (</span><span class="hl-4">request</span><span class="hl-1">, </span><span class="hl-4">response</span><span class="hl-1">) </span><span class="hl-6">=&gt;</span><span class="hl-1"> {</span><br/><br/><span class="hl-1">    </span><span class="hl-9">/// ... all input validation for user ID is done before this point ... ///</span><br/><br/><span class="hl-1">    </span><span class="hl-9">/// Any request is guaranteed to have at least AuthenticatedRequestor as API-X won&#39;t</span><br/><span class="hl-1">    </span><span class="hl-9">/// let any requests without access to reach the endpoint.</span><br/><br/><span class="hl-1">    </span><span class="hl-9">/// However, we can now control the level of access.</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-4">request</span><span class="hl-1">.</span><span class="hl-4">accessLevel</span><span class="hl-1"> === </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">AuthenticatedRequestor</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-9">/// According to guidance, this access level should only provide access to public owned data,</span><br/><span class="hl-1">      </span><span class="hl-9">/// so here we only return the user&#39;s public data; examples include a username, profile photo, etc.</span><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-0">userData</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-5">getUserPublicData</span><span class="hl-1">(</span><span class="hl-4">userId</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-9">/// ... validate user data ... ///</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">userData</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-8">else</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-9">/// Anyone with a higher access level can access the user&#39;s private data; examples include</span><br/><span class="hl-1">      </span><span class="hl-9">/// a phone number, email, etc.</span><br/><br/><span class="hl-1">      </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-0">userData</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-5">getUserPrivateData</span><span class="hl-1">(</span><span class="hl-4">userId</span><span class="hl-1">);</span><br/><br/><span class="hl-1">      </span><span class="hl-9">/// ... validate user data ... ///</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">userData</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">};</span>
</code><button type="button">Copy</button></pre>

<a id="md:determining-requestor-access-level" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Determining Requestor Access Level<a href="#md:determining-requestor-access-level" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In this previous example, a user's data is classified as either public owned data or private owned data, and for each request, the endpoint serves <em>all</em> the data that the requestor has access to. However, in some cases, developers may want the requestor to ask for specific data that they require, for example, username, email, etc., and provide access to only that. API-X provides the mechanism to support such granularity.</p>
<p>It's possible to implement such granularity at the request handler level and simply reject any request asking for data it shouldn't have access to. However, as a best practice, <em>all access control request rejection should happen prior to reaching the endpoint handler</em>. Developers can implement such a feature by implementing it into access level evaluator.</p>
<pre><code class="ts"><span class="hl-6">class</span><span class="hl-1"> </span><span class="hl-3">MyApiEvaluator</span><span class="hl-1"> </span><span class="hl-6">extends</span><span class="hl-1"> </span><span class="hl-3">ApiXAccessLevelEvaluator</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">determine</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">: </span><span class="hl-3">Request</span><span class="hl-1">): </span><span class="hl-3">ApiXAccessLevel</span><span class="hl-1"> | </span><span class="hl-3">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">ApiXAccessLevel</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-9">/// Use the provided guidance to implement your access levels. Below is an example implementation of it.</span><br/><span class="hl-1">    </span><span class="hl-6">const</span><span class="hl-1"> </span><span class="hl-0">user</span><span class="hl-1"> = </span><span class="hl-8">await</span><span class="hl-1"> </span><span class="hl-5">getRequestingUser</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">);</span><br/><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">isBlockListed</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-9">/// Perhaps some admin or moderator banned this user for some reason.</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">ApiXCleranceLevel</span><span class="hl-1">.</span><span class="hl-4">NoAccess</span><span class="hl-1">; </span><span class="hl-9">/// auto-rejection.</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">isAdmin</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">Admin</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-8">else</span><span class="hl-1"> </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">isModerator</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-5">isMethodInternal</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">) ? </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">NoAccess</span><span class="hl-1"> : </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">Moderator</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-8">else</span><span class="hl-1"> </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">isEmployee</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-5">isMethodForModeratorOrInternal</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">) ? </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">NoAccess</span><span class="hl-1"> : </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">Manager</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-8">else</span><span class="hl-1"> </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">isBetaTester</span><span class="hl-1"> &amp;&amp; </span><span class="hl-5">isBetaMethodForTesting</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">PrivilegedRequestor</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-9">/// Beta users accessing non-beta methods or regular users get regular treatment</span><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (!</span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">isAuthenticated</span><span class="hl-1">) {</span><br/><span class="hl-1">      </span><span class="hl-9">/// Unauthenticated users can just get the lowest level of access.</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">PublicRequestor</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-8">if</span><span class="hl-1"> (</span><span class="hl-5">isMethodPrivateOwnedDataOnly</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-9">/// User owns the resources it may request, so we grant Resource Owner</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-5">isUserDataOwnerInRequest</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">) ? </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">ResourceOwner</span><span class="hl-1"> : </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">NoAccess</span><span class="hl-1">;</span><br/><span class="hl-1">    } </span><span class="hl-8">else</span><span class="hl-1"> (</span><span class="hl-5">isMethodOwnedDataOnly</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">)) {</span><br/><span class="hl-1">      </span><span class="hl-9">/// If requestor is asking for resources that are owned but they are not the owner,</span><br/><span class="hl-1">      </span><span class="hl-9">/// we automatically return `NoAccess` which is the equivalent of rejecting a request.</span><br/><span class="hl-1">      </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-5">isUserDataOwnerInRequest</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">)</span><br/><span class="hl-1">        ? </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">ResourceOwner</span><span class="hl-1"> : </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">NoAccess</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><br/><span class="hl-1">    </span><span class="hl-9">/// Every other requestor gets a Authenticated Requestor which grants access to non-owned resources.</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">ApiXAccessLevel</span><span class="hl-1">.</span><span class="hl-4">AuthenticatedRequestor</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">async</span><span class="hl-1"> </span><span class="hl-5">getRequestingUser</span><span class="hl-1">(</span><span class="hl-4">req</span><span class="hl-1">: </span><span class="hl-3">Request</span><span class="hl-1">): </span><span class="hl-3">Promise</span><span class="hl-1">&lt;</span><span class="hl-3">User</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-9">/// As an example, use JWTs to get user information and/or make database reads as needed.</span><br/><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">user</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">isMethodInternal</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">Internal</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">isMethodForModeratorOrInternal</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">Internal</span><span class="hl-1">)</span><br/><span class="hl-1">      || </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">Moderative</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">isBetaMethodForTesting</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">/// In this hypothetical, all &quot;Special&quot; methods are designed for beta testers.</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">Special</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">isMethodPrivateOwnedDataOnly</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PrivateOwnedData</span><span class="hl-1">)</span><br/><span class="hl-1">      &amp;&amp; !</span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PrivateOwnedData</span><span class="hl-1">)</span><br/><span class="hl-1">      &amp;&amp; !</span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PublicUnownedData</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">isMethodOwnedDataOnly</span><span class="hl-1">(</span><span class="hl-4">appMethod</span><span class="hl-1">: </span><span class="hl-3">ApiXMethod</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PrivateOwnedData</span><span class="hl-1">)</span><br/><span class="hl-1">      &amp;&amp; </span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PrivateOwnedData</span><span class="hl-1">)</span><br/><span class="hl-1">      &amp;&amp; !</span><span class="hl-4">appMethod</span><span class="hl-1">.</span><span class="hl-5">has</span><span class="hl-1">(</span><span class="hl-4">ApiXMethodCharacteristic</span><span class="hl-1">.</span><span class="hl-4">PublicUnownedData</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-1">  </span><span class="hl-6">private</span><span class="hl-1"> </span><span class="hl-5">isUserDataOwnerInRequest</span><span class="hl-1">(</span><span class="hl-4">user</span><span class="hl-1">: </span><span class="hl-3">User</span><span class="hl-1">, </span><span class="hl-4">req</span><span class="hl-1">: </span><span class="hl-3">Request</span><span class="hl-1">): </span><span class="hl-3">boolean</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">/// Example implementation only</span><br/><span class="hl-1">    </span><span class="hl-8">return</span><span class="hl-1"> </span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-4">headers</span><span class="hl-1">[</span><span class="hl-7">&#39;X-Resource-ID&#39;</span><span class="hl-1">] === </span><span class="hl-4">user</span><span class="hl-1">.</span><span class="hl-4">id</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:levels"><span>Levels</span></a><ul><li><a href="#md:setting-endpoint-characteristics"><span>Setting <wbr/>Endpoint <wbr/>Characteristics</span></a></li><li><a href="#md:determining-access-levels-for-requests"><span>Determining <wbr/>Access <wbr/>Levels for <wbr/>Requests</span></a></li></ul><a href="#md:example-endpoint-implementation"><span>Example <wbr/>Endpoint <wbr/>Implementation</span></a><a href="#md:determining-requestor-access-level"><span>Determining <wbr/>Requestor <wbr/>Access <wbr/>Level</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@evolutius/apix</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a> with <a href="https://github.com/KillerJulian/typedoc-github-theme" target="_blank">typedoc-github-theme</a></p></footer><div class="overlay"></div></body></html>
